@page
@using TodoDemo.Models
@model TodoDemo.Pages.TodoList

@if (Model.StatusMessage != null)
{
    <p>@Model.StatusMessage</p>
}

@* @await Component.InvokeAsync("Stats", Model.UserId) *@

<vc:stats user-id="Model.UserId"/>

<form method="get" class="form-inline">
    <input type="text" name="filter" class="form-control" placeholder="search">
    <button type="submit" class="btn btn-primary">Search</button>
</form>
<hr>

@foreach (var todo in Model.Todos)
{
    <partial name="_DisplayTodoItem" model=todo></partial>
}

<hr>
<form method="post">
    <div class="form-group">
        <label asp-for="NewTodo.Description">Description: </label>
        <input asp-for="NewTodo.Description" class="form-control"> 
        <span asp-validation-for="NewTodo.Description"></span>
    </div>
    <div class="form-group">
        <label asp-for="NewTodo.Done" class="form-control">Done: </label>
        <input asp-for="NewTodo.Done" class="form-control"><br>
    </div>
    <button type="submit" asp-page-handler="add">Add Todo</button>
</form>